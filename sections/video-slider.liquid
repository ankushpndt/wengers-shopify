{% schema %}
{
  "name": "Video Slider",
  "settings": [],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        {
          "type": "text",
          "id": "step_title",
          "label": "Step Title",
          "default": "Step 1: Browse Products"
        },
        {
          "type": "textarea",
          "id": "step_description",
          "label": "Step Description",
          "default": "Explore our wide variety of delicious treats."
        },
        {
          "type": "image_picker",
          "id": "step_image",
          "label": "Step Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video Slider",
    }
  ]
}
{% endschema %}

<div class="ordering-slider-section">
  <h2 class="section-heading">Ordering Made Simple and Easy</h2>
  <div class="ordering-slider" id="orderingSlider">
    {% for block in section.blocks %}
      {% if block.type == 'step' %}
        <div class="slide">
          <div class="slide-content">
            <img
              src="{{ block.settings.step_image | file_url }}"
              alt="{{ block.settings.step_title }}"
              class="slide-image"
            >
            <h3 class="slide-title">{{ block.settings.step_title }}</h3>
            <p class="slide-description">{{ block.settings.step_description }}</p>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
  <div class="slider-buttons">
    <button id="prevSlide">←</button>
    <button id="nextSlide">→</button>
  </div>
</div>

<style>
  .ordering-slider-section {
    text-align: center;
    padding: 50px 20px;
  }
  .section-heading {
    font-size: 2em;
    margin-bottom: 20px;
  }
  .ordering-slider {
    display: flex;
    overflow: hidden;
    position: relative;
    width: 100%;
  }
  .slide {
    min-width: 100%;
    transition: transform 0.5s ease-in-out;
    text-align: center;
  }
  .slide-content {
    padding: 20px;
  }
  .slide-image {
    max-width: 150px;
    margin: 0 auto 20px;
    border-radius: 50%;
  }
  .slide-title {
    font-size: 1.5em;
    margin-bottom: 10px;
  }
  .slide-description {
    font-size: 1em;
    color: #555;
  }
  .slider-buttons {
    margin-top: 20px;
  }
  .slider-buttons button {
    background-color: #ff6f61;
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    margin: 0 10px;
    font-size: 1em;
    border-radius: 5px;
  }
  .slider-buttons button:hover {
    background-color: #ff4b3e;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const slider = document.getElementById('orderingSlider');
    const slides = slider.querySelectorAll('.slide');
    const prevButton = document.getElementById('prevSlide');
    const nextButton = document.getElementById('nextSlide');

    let currentIndex = 0;

    const updateSlider = () => {
      slider.style.transform = `translateX(-${currentIndex * 100}%)`;
    };

    const nextSlide = () => {
      currentIndex = (currentIndex < slides.length - 1) ? currentIndex + 1 : 0;
      updateSlider();
    };

    const prevSlide = () => {
      currentIndex = (currentIndex > 0) ? currentIndex - 1 : slides.length - 1;
      updateSlider();
    };

    prevButton.addEventListener('click', prevSlide);
    nextButton.addEventListener('click', nextSlide);

    // Optional: Automatic Slide Change
    setInterval(nextSlide, 5000);
  });
</script>
